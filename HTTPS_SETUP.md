# HTTPS é…ç½®æŒ‡å—

## å¿«é€Ÿå¼€å§‹

### 1. ç”Ÿæˆè‡ªç­¾åè¯ä¹¦ï¼ˆç”¨äºæµ‹è¯•ï¼‰

è¿è¡Œæä¾›çš„è„šæœ¬ï¼š

```bash
./generate_cert.sh
```

è¿™ä¼šåœ¨å½“å‰ç›®å½•ç”Ÿæˆä¸¤ä¸ªæ–‡ä»¶ï¼š
- `cert.pem` - è¯ä¹¦æ–‡ä»¶
- `key.pem` - ç§é’¥æ–‡ä»¶

### 2. é…ç½® HTTPS

åœ¨ `browser-mcp.toml` ä¸­å–æ¶ˆæ³¨é‡Šå¹¶é…ç½®è¯ä¹¦è·¯å¾„ï¼š

```toml
[server]
tls_cert = "./cert.pem"
tls_key = "./key.pem"
```

### 3. å¯åŠ¨æœåŠ¡å™¨

ä½¿ç”¨ `--http` å‚æ•°å¯åŠ¨ HTTP/HTTPS æœåŠ¡å™¨ï¼š

```bash
cargo run --bin browser-mcp -- --http --port 3000
```

å¦‚æœé…ç½®äº†è¯ä¹¦ï¼ŒæœåŠ¡å™¨ä¼šè‡ªåŠ¨ä½¿ç”¨ HTTPSï¼Œæ—¥å¿—ä¼šæ˜¾ç¤ºï¼š
```
ğŸ”’ Starting HTTPS MCP Server...
ğŸŒ HTTPS MCP Server listening on https://0.0.0.0:3000
```

### 4. æµ‹è¯•è¿æ¥

ä½¿ç”¨ curl æµ‹è¯•ï¼ˆéœ€è¦ `-k` å‚æ•°å¿½ç•¥è‡ªç­¾åè¯ä¹¦è­¦å‘Šï¼‰ï¼š

```bash
curl -k https://localhost:3000/health
```

## æ³¨æ„äº‹é¡¹

âš ï¸ **è‡ªç­¾åè¯ä¹¦ä»…ç”¨äºæµ‹è¯•**

- æµè§ˆå™¨ä¼šæ˜¾ç¤ºå®‰å…¨è­¦å‘Šï¼ˆè¿™æ˜¯æ­£å¸¸çš„ï¼‰
- ç”Ÿäº§ç¯å¢ƒè¯·ä½¿ç”¨ç”±å—ä¿¡ä»» CA ç­¾å‘çš„è¯ä¹¦
- è‡ªç­¾åè¯ä¹¦çš„æœ‰æ•ˆæœŸä¸º 365 å¤©

## æ‰‹åŠ¨ç”Ÿæˆè¯ä¹¦ï¼ˆé«˜çº§ï¼‰

å¦‚æœéœ€è¦è‡ªå®šä¹‰è¯ä¹¦ä¿¡æ¯ï¼Œå¯ä»¥æ‰‹åŠ¨æ‰§è¡Œï¼š

```bash
# 1. ç”Ÿæˆç§é’¥
openssl genrsa -out key.pem 2048

# 2. ç”Ÿæˆè¯ä¹¦ç­¾åè¯·æ±‚ï¼ˆå¯ä»¥è‡ªå®šä¹‰ä¿¡æ¯ï¼‰
openssl req -new -key key.pem -out cert.csr \
  -subj "/CN=your-domain.com/O=Your Organization/C=US"

# 3. ç”Ÿæˆè‡ªç­¾åè¯ä¹¦
openssl x509 -req -days 365 -in cert.csr -signkey key.pem -out cert.pem

# 4. æ¸…ç†ä¸´æ—¶æ–‡ä»¶
rm cert.csr
```

## ç”Ÿäº§ç¯å¢ƒè¯ä¹¦

å¯¹äºç”Ÿäº§ç¯å¢ƒï¼Œå»ºè®®ï¼š

1. ä½¿ç”¨ Let's Encrypt å…è´¹è¯ä¹¦
2. ä½¿ç”¨å•†ä¸š CA ç­¾å‘çš„è¯ä¹¦
3. ä½¿ç”¨å…¬å¸å†…éƒ¨ CA ç­¾å‘çš„è¯ä¹¦

è¯ä¹¦æ ¼å¼å¿…é¡»æ˜¯ PEM æ ¼å¼ï¼ˆ`.pem` æ–‡ä»¶ï¼‰ã€‚
